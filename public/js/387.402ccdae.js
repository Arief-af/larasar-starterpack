"use strict";(self["webpackChunklarasar"]=self["webpackChunklarasar"]||[]).push([[387],{9387:(e,o,a)=>{a.r(o),a.d(o,{default:()=>Q});var l=a(3673),n=a(2323);const t={class:"q-pa-md"},r=(0,l._)("div",{class:"q-my-lg"},"Room Table",-1),s=(0,l.Uk)(" Dark Mode "),m={class:"form-label"},i={key:0,class:"text-negative q-my-sm"};function d(e,o,a,d,u,c){const p=(0,l.up)("q-toggle"),f=(0,l.up)("q-card-section"),w=(0,l.up)("q-card"),b=(0,l.up)("q-input"),g=(0,l.up)("q-btn"),k=(0,l.up)("q-form"),v=(0,l.up)("q-td"),q=(0,l.up)("q-table");return(0,l.wg)(),(0,l.iD)("div",t,[r,(0,l.Wm)(w,{class:"my-card"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[s,(0,l.Wm)(p,{color:"warning",dark:"",modelValue:d.darkMode,"onUpdate:modelValue":o[0]||(o[0]=e=>d.darkMode=e)},null,8,["modelValue"])])),_:1})])),_:1}),(0,l.Wm)(w,{class:"my-card q-my-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(k,{onSubmit:d.onSubmit,onReset:d.onReset,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l.Wm)(b,{color:"warning",modelValue:d.room.name,"onUpdate:modelValue":o[1]||(o[1]=e=>d.room.name=e),type:"text",label:"Room Name"},null,8,["modelValue"]),d.errors.name?((0,l.wg)(),(0,l.iD)("div",i,(0,n.zw)(d.errors.name[0]),1)):(0,l.kq)("",!0)]),(0,l._)("div",null,[(0,l.Wm)(g,{class:"q-ma-sm",label:"Submit",type:"submit",color:"warning"}),(0,l.Wm)(g,{class:"q-ma-sm",label:"Reset",type:"reset",color:"warning",flat:""})])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1}),(0,l.Wm)(q,{title:"Simple",rows:d.rooms,columns:d.columns,"row-key":"name",dense:""},{"body-cell-actions":(0,l.w5)((e=>[(0,l.Wm)(v,{props:e},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{dense:"",round:"",flat:"",color:"warning",onClick:o=>d.editRow(e),icon:"edit"},null,8,["onClick"]),(0,l.Wm)(g,{dense:"",round:"",flat:"",color:"negative",onClick:o=>d.deleteRow(e),icon:"delete"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])}var u=a(8825),c=a(5474),p=a(1959),f=a(741);const w={setup(){const e=(0,f.oR)(),o=(0,l.Fl)((()=>e.state.user));let a=(0,p.iH)();a.value=o.value.dark;const n=(0,u.Z)();(0,l.YP)((()=>{1==a.value?(n.dark.set(!0),e.commit("user/darkMode",!0)):(n.dark.set(!1),e.commit("user/darkMode",!1))}));const t=(0,p.iH)([]);function r(){c.api.get("/api/room").then((e=>{t.value=e.data.data}))}r(),(0,l.bv)((()=>{window.Echo.channel("room").listen("RoomCreated",(e=>{console.log(e.room),t.value.push(e.room)})),window.Echo.channel("room-deleted").listen("RoomDeleted",(e=>{const o=t.value.indexOf(e.room.id);t.value.splice(o,1)}))}));const s=[{name:"name",required:!0,label:"Room",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"id",align:"left",label:"ID",field:"id",sortable:!0},{name:"user_id",align:"left",label:"User ID",field:"user_id",sortable:!0},{name:"username",align:"left",label:"username",field:e=>e.user.username,sortable:!0},{name:"token",align:"left",label:"Token",field:"token",sortable:!0},{name:"actions",label:"Actions",field:"",align:"center"}];function m(e,o){n.dialog({color:"warning",title:"Update room name",prompt:{model:e.name,type:"text"},cancel:!0,persistent:!0}).onOk((o=>{c.api.put(`/api/room/${e.id}/update`,{name:o}).then((()=>{r()}))})).onCancel((()=>{}))}function i(e){const o=t.value.indexOf(e.row),a=e.row;m(a,o)}function d(e){const o=t.value.indexOf(e.row);t.value.splice(o,1),c.api["delete"](`/api/room/${e.row.id}`).then((e=>{n.notify({message:"Room has been deleted",icon:"bolt",color:"warning"})}))}const w=(0,p.iH)([]),b=(0,p.iH)([]);function g(){c.api.post("/api/room",{name:w.value.name}).then((e=>{r(),w.value=[],n.notify({message:"Room created",icon:"bolt",color:"warning"})})).catch((e=>{b.value=e.response.data.errors}))}function k(){w.value=[],b.value=[]}return{darkMode:a,onReset:k,room:w,errors:b,onSubmit:g,columns:s,rooms:t,editRow:i,deleteRow:d}}};var b=a(4260),g=a(151),k=a(5589),v=a(8886),q=a(5269),R=a(4842),h=a(8240),y=a(1063),W=a(3884),_=a(7518),C=a.n(_);const Z=(0,b.Z)(w,[["render",d]]),Q=Z;C()(w,"components",{QCard:g.Z,QCardSection:k.Z,QToggle:v.Z,QForm:q.Z,QInput:R.Z,QBtn:h.Z,QTable:y.Z,QTd:W.Z})}}]);